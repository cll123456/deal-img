let e=document.createElement("style");e.innerHTML='@charset "UTF-8";.progress[data-v-121439d6]{height:20px;overflow:hidden;background-color:#f5f5f5;border-radius:10px;-webkit-box-shadow:inset 0 1px 2px rgba(0,0,0,.1);box-shadow:inset 0 1px 2px rgba(0,0,0,.1)}.progress-bar[data-v-121439d6]{float:left;width:0;height:100%;font-size:12px;line-height:20px;color:#fff;text-align:center;background-color:#337ab7;-webkit-box-shadow:inset 0 -1px 0 rgba(0,0,0,.15);box-shadow:inset 0 -1px 0 rgba(0,0,0,.15);-webkit-transition:width .6s;-o-transition:width .6s;transition:width .6s}.progress-bar-striped[data-v-121439d6]{background-image:-webkit-linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent);background-image:-o-linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent);background-image:linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent);-webkit-background-size:40px 40px;background-size:40px 40px}.progress-bar-active[data-v-121439d6]{-webkit-animation:2s linear infinite progress-bar-stripes-121439d6;-o-animation:2s linear infinite progress-bar-stripes-121439d6;animation:2s linear infinite progress-bar-stripes-121439d6}.progress-bar .hidden-txt[data-v-121439d6]{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}@-webkit-keyframes progress-bar-stripes-121439d6{from{background-position:-40px 0}to{background-position:0 0}}.dlg-pressImg[data-v-10e9c49e]{background-color:#f9f6f680;background-image:linear-gradient(to bottom,#f9f6f680,#fff);width:100%;height:calc(100vh - 60px);overflow:auto}.dlg-pressImg--container[data-v-10e9c49e]{padding:50px 0;height:150px;display:flex;flex-direction:column;align-items:center}.dlg-pressImg--container h1[data-v-10e9c49e]{font-size:22px;padding-bottom:50px}.dlg-pressImg--remark[data-v-10e9c49e]{font-size:12px;text-align:center}.dlg-pressImg--remark p[data-v-10e9c49e]{margin:5px auto;color:#f40}.dlg-pressImg--list[data-v-10e9c49e]{padding:12px;border:1px solid #bbcbd0;border-radius:2px;background-color:#fff;max-width:960px;margin:0 auto}.dlg-pressImg--list .el-row[data-v-10e9c49e]{margin:4px;padding:0 12.8px;background:#f0f0f0;border:1px solid #cfdbde;border-radius:2px;font-weight:700;display:flex;align-items:center;height:30px;color:#363a43;font-size:14px;cursor:pointer}.dlg-pressImg--list .el-row>.el-col[data-v-10e9c49e]:nth-child(1),.dlg-pressImg--list .el-row>.el-col[data-v-10e9c49e]:nth-child(3){display:flex;justify-content:space-between}.dlg-pressImg--list .el-row>.el-col:nth-child(1) .img-title[data-v-10e9c49e],.dlg-pressImg--list .el-row>.el-col:nth-child(3) .img-title[data-v-10e9c49e]{max-width:200px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.dlg-pressImg--list .el-row>.el-col:nth-child(1) .img-size[data-v-10e9c49e],.dlg-pressImg--list .el-row>.el-col:nth-child(3) .img-size[data-v-10e9c49e]{font-weight:400;color:#67c23a;padding:0 20px}',document.head.appendChild(e);import{o as a,c as s,d as t,t as r,w as i,u as o,r as l,p as d,a as n,b as p,F as g,e as c,f,h}from"./index.6fcb6990.js";import{s as m}from"./FileUpload.c3a5ae1d.js";import{a as b,u,s as x,i as w}from"./fileUtils.7aff9daa.js";function v(e){return new RegExp("^#([0-9a-fA-F]{6}|[0-9a-fA-F]{3})$").test(e)}var k={name:"myProcess",props:{bgColor:{type:String,validator:e=>v(e),default:"#337ab7"},txtColor:{type:String,validator:e=>v(e),default:"#fff"},showTxt:Boolean,showStriped:Boolean,showAct:Boolean,brdRs:{type:Number,validator:e=>e>=0&&e<=20,default:4},txt:String,processDept:{type:Number,validator:e=>e>=0&&e<=100,default:30},pcsHeight:{type:Number,default:10}}};const y=i("data-v-121439d6")(((e,i,o,l,d,n)=>(a(),s("div",{class:"progress",style:{borderRadius:o.brdRs+"px",height:o.pcsHeight+"px"}},[t("div",{class:["progress-bar",{"progress-bar-striped":o.showStriped,"progress-bar-active":o.showAct}],style:{width:o.processDept+"%",backgroundColor:o.bgColor,color:o.txtColor}},[t("span",{class:{"hidden-txt":!o.showTxt}},r(o.txt),3)],6)],4))));k.render=y,k.__scopeId="data-v-121439d6";var z={name:"index",components:{MyProcess:k,FileUpload:m},setup(){o();const e=l(!1),a=l([]);return{sureUpload:e=>x(e),pressFileUpload:async s=>{if(w(s)){e.value=!0;try{await async function(e,a,s){let t={fileName:e.files[0].name,fileOriSizeB:e.files[0].size,fileOriSize:b(e.files[0].size),process:100,processTxt:"压缩中",bgColor:"#409eff",hasActive:!0,hasStriped:!0,hasTxt:!0,pressFileSize:"",reduce:"",hasShowDownload:!1};s.value.push(t);try{const s=await u(e);t.bgColor="#67C23A",t.processTxt="完成",t.hasShowDownload=!0,t.hasStriped=!1,t.pressFileSize=b(+s.data.size),t.url=s.data.url,t.reduce=-((t.fileOriSizeB-s.data.size)/t.fileOriSizeB*100).toFixed(2)+"%",a.value=!1}catch(e){console.log("图片压缩失败"),s.value.splice(s.value.indexOf(t),1)}}(s,e,a)}catch(a){e.value=!1}}},hasChooseFileLoading:e,imgList:a}}};const I=i("data-v-10e9c49e");d("data-v-10e9c49e");const S={class:"dlg-pressImg"},F={class:"dlg-pressImg--container"},C=t("h1",null,"在线图片压缩、减少图片大小",-1),_=t("i",{class:"el-icon-upload el-icon--left"},null,-1),T=f(" 上传压缩的图片 "),j=t("div",{class:"dlg-pressImg--remark"},[t("p",null,"备注1：请上传jpg,jpeg,或者png的图片，图片大小在100MB之内"),t("p",null,"备注2：压缩完后请尽快下载，30min后图片自动删除.         ")],-1),N={key:0,class:"dlg-pressImg--list"},U={class:"img-size"},A={class:"img-size"},B={class:"img-download"},L={class:"img-reduce--size"};n();const O=I(((e,i,o,l,d,n)=>{const m=p("el-button"),b=p("file-upload"),u=p("el-col"),x=p("my-process"),w=p("el-link"),v=p("el-row");return a(),s("div",S,[t("div",F,[C,t("p",null,[t(m,{type:"primary",onClick:i[1]||(i[1]=e=>l.sureUpload("pressImg")),loading:l.hasChooseFileLoading},{default:I((()=>[_,T])),_:1},8,["loading"]),t(b,{"file-id":"pressImg",onHandFile:l.pressFileUpload,"file-type":"image/jpeg,image/jpg,image/png","is-multiple":!1},null,8,["onHandFile"])])]),j,l.imgList.length>0?(a(),s("section",N,[(a(!0),s(g,null,c(l.imgList,(e=>(a(),s(v,null,{default:I((()=>[t(u,{span:8},{default:I((()=>[t("div",{class:"img-title",title:e.fileName},r(e.fileName),9,["title"]),t("div",U,r(e.fileOriSize),1)])),_:2},1024),t(u,{span:8},{default:I((()=>[t(x,{"brd-rs":10,"pcs-height":20,"show-txt":e.hasTxt,txt:e.processTxt,"process-dept":e.process,"bg-color":e.bgColor,"show-striped":e.hasStriped,"show-act":e.hasActive},null,8,["show-txt","txt","process-dept","bg-color","show-striped","show-act"])])),_:2},1024),t(u,{span:8},{default:I((()=>[t("div",A,r(e.pressFileSize),1),t("div",B,[t(w,{type:"info",href:`/api/download?filePath=${e.url}&fileName=${e.fileName}`},{default:I((()=>[f(r(e.hasShowDownload?"下载压缩图":""),1)])),_:2},1032,["href"])]),t("div",L,r(e.reduce),1)])),_:2},1024)])),_:2},1024)))),256))])):h("",!0)])}));z.render=O,z.__scopeId="data-v-10e9c49e";export default z;
