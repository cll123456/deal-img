let e=document.createElement("style");e.innerHTML='@charset "UTF-8";.dlg-width[data-v-2d9af49b]{width:1200px;margin:0 auto}.dlg-center[data-v-2d9af49b]{display:flex;justify-content:center;align-items:center}.dlg-home[data-v-2d9af49b]{background-color:#f9f6f680;background-image:linear-gradient(to bottom,#f9f6f680,#fff);width:100%;height:calc(100vh - 60px);overflow:auto}.dlg-home--container[data-v-2d9af49b]{padding:50px 0;height:150px;display:flex;flex-direction:column;align-items:center}.dlg-home--container h1[data-v-2d9af49b]{font-size:22px;padding-bottom:50px}.dlg-home--imgList[data-v-2d9af49b]{padding-bottom:60px}.dlg-home--imgList .el-slider[data-v-2d9af49b]{width:250px}.dlg-home--remark[data-v-2d9af49b]{font-size:12px;text-align:center}.dlg-home--remark p[data-v-2d9af49b]{margin:5px auto;color:#f40}',document.head.appendChild(e);import{u as a,r as l,p as t,a as o,b as n,o as d,c as i,d as m,F as r,e as g,w as u,f as s}from"./index.6fcb6990.js";import{s as f}from"./FileUpload.c3a5ae1d.js";import{d as c,i as p,u as x,g as h,t as v}from"./fileUtils.7aff9daa.js";import{c as C,f as b}from"./qrcodeConfig.d41e5d7a.js";const I={txtCont:"水印文字",txtSize:30,txtAngle:0,textFam:"KaiTi_GB2312",textColor:"#00ced1",textFullImg:0,horTxtMargin:500,maxHorMargin:1e3,maxVerMargin:1e3,verTxtMargin:500,textImgSrc:""},V=["#cccccc","#ff4500","#ff8c00","#ffd700","#90ee90","#00ced1","#1e90ff","#c71585","rgba(255, 69, 0, 0.68)","rgb(255, 120, 0)","hsl(181, 100%, 37%)","hsla(209, 100%, 56%, 0.73)","#c7158577"];var w={name:"home",components:{FileUpload:f},setup(){a();const e=l(!1);let t=!1;const o=()=>{!t||n.value.textImgSrc?async function(e,a){const l=new Image;l.src=e.value.textImgSrc,l.setAttribute("crossOrigin","Anonymous"),l.onload=()=>{const t=document.createElement("canvas");t.style.display="none";const o=l.height,n=l.width;e.value.maxHorMargin=n,e.value.maxVerMargin=o,t.width=n,t.height=o;const d=t.getContext("2d");if(d.drawImage(l,0,0,n,o),d.textAlign="center",d.textBaseline="middle",d.font=e.value.txtSize+"px "+e.value.textFam,d.fillStyle=e.value.textColor,1===e.value.textFullImg)for(let a=-20;a<20;a++){d.rotate(-e.value.txtAngle*Math.PI/180);const l=e.value.txtCont+" ".repeat(Math.ceil(e.value.horTxtMargin/10));d.fillText(l.repeat(100),0,a*e.value.verTxtMargin/3),d.rotate(e.value.txtAngle*Math.PI/180)}else d.fillText(e.value.txtCont,e.value.horTxtMargin,e.value.verTxtMargin),d.rotate(e.value.txtAngle*Math.PI/180);const i=new Image;i.src=t.toDataURL(),i.style.width="100%";const m=document.getElementById(a);m.innerHTML="",m.appendChild(i),m.appendChild(t)}}(n,"imgCanvas"):v("warning","请先上传图片，在调节文字的选项！")},n=l(C(I));return{sureUpload:a=>{document.querySelector(`#${a}`).click(),e.value=!0},homeFileUpload:async a=>{if(p(a)){e.value=!0;try{const l=await x(a);n.value.textImgSrc=h(l),e.value=!1,o(),t=!0}catch(a){e.value=!1}}},hasChooseFileLoading:e,downloadImg:()=>c(".imgCanvas","水印图片"),resetImg:()=>{n.value=l(C(I)),o()},getTextWaterImg:o,form:n,predefineColors:V,fontFamilyOptions:b}}};const T=u("data-v-2d9af49b");t("data-v-2d9af49b");const y={class:"dlg-home"},F={class:"dlg-home--container"},M=m("h1",null,"在线图片加水印、加水印文字制作",-1),U=m("i",{class:"el-icon-upload el-icon--left"},null,-1),_=s(" 上传加水印的图片 "),k={class:"dlg-home--imgList dlg-width"},z=s(" 下载图片"),S=s(" 重置图片 "),j=m("div",null,[m("div",{class:"img-container dlg-center"},[m("div",{id:"imgCanvas",class:"imgCanvas"})])],-1),A=m("div",{class:"dlg-home--remark"},[m("p",null,"备注1：请上传jpg,jpeg,或者png的图片，图片大小在100MB之内"),m("p",null,"备注2：图片会调用后台自动进行压缩，防止图片过大.               "),m("p",null,"备注3：完成水印后请尽快下载，30min后原图片自动删除.         ")],-1);o();const W=T(((e,a,l,t,o,u)=>{const s=n("el-button"),f=n("file-upload"),c=n("el-input"),p=n("el-form-item"),x=n("el-option"),h=n("el-select"),v=n("el-slider"),C=n("el-color-picker"),b=n("el-form"),I=n("el-card");return d(),i("div",y,[m("div",F,[M,m("p",null,[m(s,{type:"primary",onClick:a[1]||(a[1]=e=>t.sureUpload("homeFileUpd")),loading:t.hasChooseFileLoading},{default:T((()=>[U,_])),_:1},8,["loading"]),m(f,{"file-id":"homeFileUpd",onHandFile:t.homeFileUpload,"file-type":"image/jpeg,image/jpg,image/png","is-multiple":!1},null,8,["onHandFile"])])]),m("div",k,[m(I,{shadow:"always"},{default:T((()=>[m(b,{ref:"imgForm",model:t.form,"label-width":"120px",inline:""},{default:T((()=>[m(p,{label:"水印文本内容"},{default:T((()=>[m(c,{modelValue:t.form.txtCont,"onUpdate:modelValue":a[2]||(a[2]=e=>t.form.txtCont=e),placeholder:"请输入水印文字的内容",onInput:t.getTextWaterImg,size:"small",clearable:""},null,8,["modelValue","onInput"])])),_:1}),m(p,{label:"全图水印"},{default:T((()=>[m(h,{modelValue:t.form.textFullImg,"onUpdate:modelValue":a[3]||(a[3]=e=>t.form.textFullImg=e),onChange:t.getTextWaterImg,size:"small"},{default:T((()=>[m(x,{label:"否",value:0}),m(x,{label:"是",value:1})])),_:1},8,["modelValue","onChange"])])),_:1}),m(p,{label:"文本字体"},{default:T((()=>[m(h,{size:"small",onChange:t.getTextWaterImg,modelValue:t.form.textFam,"onUpdate:modelValue":a[4]||(a[4]=e=>t.form.textFam=e),placeholder:"请选择"},{default:T((()=>[(d(!0),i(r,null,g(t.fontFamilyOptions,(e=>(d(),i(x,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["onChange","modelValue"])])),_:1}),m(p,{label:"文本大小"},{default:T((()=>[m(v,{modelValue:t.form.txtSize,"onUpdate:modelValue":a[5]||(a[5]=e=>t.form.txtSize=e),min:10,max:150,"show-input":"",onChange:t.getTextWaterImg},null,8,["modelValue","onChange"])])),_:1}),m(p,{label:"文本旋转角度"},{default:T((()=>[m(v,{onChange:t.getTextWaterImg,modelValue:t.form.txtAngle,"onUpdate:modelValue":a[6]||(a[6]=e=>t.form.txtAngle=e),min:-45,max:45,"show-input":""},null,8,["onChange","modelValue"])])),_:1}),m(p,{label:"文本颜色"},{default:T((()=>[m(C,{onChange:t.getTextWaterImg,modelValue:t.form.textColor,"onUpdate:modelValue":a[7]||(a[7]=e=>t.form.textColor=e),"show-alpha":"",predefine:t.predefineColors},null,8,["onChange","modelValue","predefine"])])),_:1}),m(p,{label:"水平方向的距离"},{default:T((()=>[m(v,{modelValue:t.form.horTxtMargin,"onUpdate:modelValue":a[8]||(a[8]=e=>t.form.horTxtMargin=e),min:10,max:t.form.maxHorMargin,"show-input":"",onChange:t.getTextWaterImg},null,8,["modelValue","max","onChange"])])),_:1}),m(p,{label:"垂直方向的距离"},{default:T((()=>[m(v,{modelValue:t.form.verTxtMargin,"onUpdate:modelValue":a[9]||(a[9]=e=>t.form.verTxtMargin=e),min:10,max:t.form.maxVerMargin,"show-input":"",onChange:t.getTextWaterImg},null,8,["modelValue","max","onChange"])])),_:1}),m(p,{label:"操作"},{default:T((()=>[m(s,{type:"primary",onClick:t.downloadImg,size:"small"},{default:T((()=>[z])),_:1},8,["onClick"]),m(s,{onClick:t.resetImg,size:"small"},{default:T((()=>[S])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])])),_:1})]),j,A])}));w.render=W,w.__scopeId="data-v-2d9af49b";export default w;
